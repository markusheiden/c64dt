
*** F64 (a companion file to certain D64's)
*** Document revision 1.3

  Created by a program called FCOPY, written  by  M.  Edzes  in  the  early
1990's, these files contain some extra information about the associated D64
files like the low-level disk ID, sector checksum, valid  sector  flag  and
header ID. These files appear to be very rare, but are available from a  CD
called "C64 CD 96", also known as the "Unicorn" CD. 

  Some of what you are about to read is pure conjecture on the part of  the
author to explain what these files are. Much of the  explanation  regarding
this file description comes from documentation provided by Joe Forster/STA,
and it is still not complete.

  They all appear to be the same size, 2051 bytes, and seem to  start  with
the DISK ID from  the  D64  image.  The  F64  definition  only  encompasses
standard 35-track disk images.  No  consideration  was  made  for  40-track
images.

      00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F        ASCII
      -----------------------------------------------   ----------------
0000: 30 34 .. .. .. .. .. .. .. .. .. .. .. .. .. ..   04..............

  Here the DISK ID is "04", and is likely obtained from the  sector  header
ID for track 18/0 (not the one visible on the BAM sector).

  Once we take into account the first two bytes, this leaves the  remaining
2049 bytes. Dividing this number  by  683  (the  number  of  sectors  in  a
standard 35 track D64 image) leaves us a grouping of 3  bytes  per  sector.
Below is a dump of the first few bytes  of  the  F64  files,  and  we  will
examine a few of the 3-byte descriptions.

      00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F        ASCII
      -----------------------------------------------   ----------------
0000: .. .. 2D 07 01 2B 07 8D 2B 07 47 2B 07 AE 2B 07   ..-תת+ת+תG+ת®+ת
0010: 80 2B 07 C3 2B 07 1C 2B 07 4E 2B 07 EC 2B 07 47   €+תֳ+תת+תN+תל+תG
0020: 2B 07 FE 2B 07 5F 2B 07 69 2B 07 F3 2B 07 90 2B   +ת‏+ת_+תi+תף+ת+
0030: 07 22 2B 07 4D 2D 07 01 2D 07 01 2D 07 01 2D 07   ת"+תM-תת-תת-תת-ת

  The first sector has a description of "2D 07 01".

    Byte: 00 - "2D". This is the sector status code,  representing  whether
               the sector is ok, empty, or contains as  error.  This  value
               can be one of the following string  (excluding  the  quotes)
               "+-CHI?FL".

               '+' : The sector is ok, and allocated
               '-' : The sector is ok, but  empty  (contains  the  $4B  $01
                     format pattern)
               '?' : This one is unknown.
               'H' : Error 20. No header can be found for the sector.
               'S' : Error 21. There is no SYNC mark on the track.
               'I' : Error 22. The data descriptor byte  has  an  incorrect
                     value. This error will also come with a invalid  value
                     for byte $01.
               'C' : Error 23. The data block checksum is wrong. This error
                     will also come with an incorrect value for byte $02.
               'L' : Error 24. An invalid GCR pattern  is  present  in  the
                     data block.
               'F' : Error 25. The data written on the disk  was  not  what
                     was read back for verification.
               'P' : Error 26. The disk is write-protected.
               'H' : Error 27. The sector header checksum  is  wrong.  Note
                     that 'H' also represents Error 20.

          01 - "07". This is the "data descriptor byte" meaning the  sector
               is OK, and exists. If it was a value other than $07, we have
               an error 22 ("data block not found").

          02 - "01". This is the data block checksum for the sector. It  is
               arrived at by XOR'ing all 256 data bytes, from  position  00
               to position FF.

  The second sector has a description of "2B 07 8D". From the above layout,
this means the sector data is ok, the data header is ok ("07"), and  has  a
checksum of "8D" (calculated and verified from the D64).

  It is important to note that error 29 cannot be represented by F64. There
is no way to do so because the individual sector ID's are not stored in the
F64 file.

  Also important is the dual use of 'H' for  both  error  20  and  27.  The
reason for this is unknown, but it could stem from the  way  the  1541  DOS
works. A mismatching sector header checksum (the reason for  an  error  27)
can also cause the sector header to not be found (the reason for  an  error
20). It is recommended that conversion programs convert this status code to
an error 27 as it is the less serious error.

